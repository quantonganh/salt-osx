#
# Executes commands at the start of an interactive session.
#
# Load all files from .zshrc.d directory
if [ -d $HOME/.zshrc.d ]; then
  for file in $HOME/.zshrc.d/*.zsh; do
    source $file
  done
fi

# Authors:
#   Sorin Ionescu <sorin.ionescu@gmail.com>
#

# Source Prezto.
if [[ -s "${ZDOTDIR:-$HOME}/.zprezto/init.zsh" ]]; then
  source "${ZDOTDIR:-$HOME}/.zprezto/init.zsh"
fi

unsetopt histverify
unsetopt share_history

# Customize to your needs...
alias s="sudo salt-call state.sls -l debug $1 --return=sentry_common"
alias vim="/usr/local/bin/mvim -v"
alias vu="vagrant up $1"
alias vs="vagrant ssh $1"
alias vh="vagrant halt $1"
alias vr="vagrant reload $1"
#alias dr="docker run -d --privileged --cap-add=ALL -P -v /lib/modules:/lib/modules -v /Users/quanta/bit-Flippers/infra/common/:/root/salt/states -v /Users/quanta/bit-Flippers/infra/pillars:/root/salt/pillar $1"
alias dr="docker run -d --privileged --cap-add=ALL -P -m 2g -v /lib/modules:/lib/modules -v /root/salt/states:/root/salt/states -v /root/salt/pillar:/root/salt/pillar $1"
alias de="docker exec -it $1 /bin/bash"

source /Users/quanta/.iterm2_shell_integration.zsh
fpath=(/usr/local/share/zsh/site-functions $fpath)
autoload -Uz compinit && compinit -i

function dl() {
    DOCKER=`which docker`

    if [ "$#" -ne 1 ]; then
      echo "Usage: $0 IMAGE"
      exit 0
    fi

    for commit in $($DOCKER history $1 | sed 1d | awk '{ print $1 }')
    do
      content="$commit
    $($DOCKER inspect $commit | tr -d '\"' | grep 'Created\|Author\|Comment')"
      echo "$content"
    done
}
